using Newtonsoft.Json;

namespace BookWormApi.Models
{
    /// <summary>
    /// Class for holding the incoming request to the controller and it's
    /// response.
    /// Should be used to save the request/response pairs somewhere
    /// </summary>
    public class PersistedRequestResponse
    {
        #region Properties

        /// <summary>
        /// The original request to save
        /// </summary>
        public TextParsingInput Request { get; set; }

        /// <summary>
        /// The response in case it was a statistics call
        /// </summary>
        public TextStatistics Statistics { get; set; }

        /// <summary>
        /// The response in case it was a sorting call
        /// </summary>
        public string Response { get; set; }

        #endregion

        #region CTOR

        /// <summary>
        /// Creates a new Request/Response pair
        /// </summary>
        /// <param name="input">The request received by the application</param>
        /// <param name="output">The response generated by the application</param>
        public PersistedRequestResponse(TextParsingInput input, TextStatistics output)
        {
            Request = input;
            Statistics = output;
        }

        /// <summary>
        /// Creates a new Request/Response pair
        /// </summary>
        /// <param name="input">The request received by the application</param>
        /// <param name="output">The response generated by the application</param>
        public PersistedRequestResponse(TextParsingInput input, string output)
        {
            Request = input;
            Response = output;
        }

        #endregion

        #region Overrides

        /// <summary>
        /// Converts the response to Json
        /// </summary>
        /// <returns></returns>
        public override string ToString()
        {
            return JsonConvert.SerializeObject(this);
        }

        #endregion
    }
}
